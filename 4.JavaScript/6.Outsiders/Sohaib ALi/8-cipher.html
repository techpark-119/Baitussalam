<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cipher</title>
  </head>
  <body>
    <!-- MY CODE -->
    <script>
      const key = "GADERYPOLUKITVMZONSQRFHJ";

      function checkSibling(array, element) {
        if (
          array[array.indexOf(element.toUpperCase()) + 1] !== undefined &&
          array[array.indexOf(element.toUpperCase()) + 1] !== "-"
        )
          return array[array.indexOf(element.toUpperCase()) + 1].toLowerCase();
        if (
          array[array.indexOf(element.toUpperCase()) + 1] === undefined ||
          array[array.indexOf(element.toUpperCase()) + 1] === "-"
        )
          return array[array.indexOf(element.toUpperCase()) - 1].toLowerCase();
      }

      function decodeEncodeCipher(message, keyString) {
        if (!(key.length % 2 === 0)) return "Invalid Key!";
        var keyArr = [];
        let countVar = 0;
        for (let checkVar of keyString) {
          if (countVar % 2 === 0 && !(keyArr.length === 0)) keyArr.push("-");
          keyArr.push(checkVar);
          countVar++;
        }
        var messageOut = [];
        for (let char of message) {
          if (keyArr.includes(char.toUpperCase()))
            messageOut.push(checkSibling(keyArr, char));
          else messageOut.push(char);
        }
        return messageOut.join("");
      }

      console.log(decodeEncodeCipher("This is secret message", key));
      console.log(decodeEncodeCipher("vjkq kq qdcydv zdqqgad", key));
    </script>
    <!--  -->

    <!-- CHAT GPT COMPACT CODE -->
    <script>
      console.log("Chat GPT's -",
        (c = (s) =>
          s.replace(
            /\w/gi,
            (x) =>
              (m = Object.fromEntries(
                [...(k = "GADERYPOLUKITVMZONSQRFHJ")].map((c, i, a) => [
                  c,
                  a[i ^ 1],
                ])
              ))[x.toUpperCase()]?.toLowerCase() || x
          ))("This is secret message")
      );
    </script>
    <!--  -->
  </body>
</html>
